<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Technical Whitepaper | Miyagi X Pulse</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* --- CORE THEME --- */
    * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }

    body {
      font-family: 'Inter', sans-serif;
      background: #000;
      color: #e3e7eb;
      line-height: 1.7;
      background-image: linear-gradient(rgba(0,0,0,0.8), #000), url("assets/background.jpg");
      background-repeat: no-repeat;
      background-size: 100% 600px;
    }

    /* --- NAVBAR --- */
    header {
      display: flex; justify-content: space-between; align-items: center;
      background: rgba(10, 12, 16, 0.95); padding: 0 40px; height: 80px;
      position: fixed; top: 0; width: 100%; z-index: 1000;
      backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .logo {
      font-size: 1.4em; font-weight: 700; color: #42caff; text-decoration: none;
      letter-spacing: 0.5px; margin-right: 20px;
    }

    nav { display: flex; align-items: center; gap: 25px; height: 100%; }
    nav > a { text-decoration: none; color: #b8c2cc; font-weight: 500; font-size: 0.9em; transition: 0.2s; }
    nav > a:hover { color: #42caff; }
    .nav-cta { background: #42caff; color: #000 !important; padding: 8px 20px; border-radius: 6px; font-weight: 600; }
    .nav-cta:hover { background: #63d7ff; }

    /* --- PAGE LAYOUT --- */
    .container {
      max-width: 1200px; margin: 120px auto 80px; padding: 0 20px;
      display: grid; grid-template-columns: 280px 1fr; gap: 60px;
    }

    /* --- SIDEBAR TOC --- */
    aside {
      position: sticky; top: 120px; height: fit-content;
      border-right: 1px solid rgba(255,255,255,0.05); padding-right: 20px;
      max-height: 80vh; overflow-y: auto;
    }
    aside::-webkit-scrollbar { width: 4px; }
    aside::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

    aside h4 { color: #fff; margin-bottom: 20px; font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }

    .toc-link {
      display: block; color: #7a8590; text-decoration: none; font-size: 0.85em;
      margin-bottom: 10px; transition: 0.2s; padding-left: 10px;
      border-left: 2px solid transparent; cursor: pointer;
    }
    .toc-link:hover, .toc-link.active { color: #42caff; border-left-color: #42caff; }

    /* --- MAIN CONTENT --- */
    main {
      background: rgba(14, 17, 22, 0.4); padding: 40px; border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.03);
    }

    /* FIX: Scroll Margin prevents header from covering titles */
    section { scroll-margin-top: 100px; margin-bottom: 60px; }

    h1 { font-size: 2.4em; font-weight: 700; color: #fff; margin-bottom: 10px; }
    .version { color: #42caff; font-family: monospace; font-size: 0.9em; display: block; margin-bottom: 40px; }

    h2 { 
      font-size: 1.8em; color: #fff; margin-bottom: 25px; padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    section:first-of-type h2 { margin-top: 0; }
    h3 { font-size: 1.3em; color: #42caff; margin-top: 40px; margin-bottom: 15px; }
    p { margin-bottom: 20px; color: #cbd5df; text-align: justify; }
    ul, ol { margin-bottom: 20px; padding-left: 25px; color: #cbd5df; }
    li { margin-bottom: 8px; }

    /* Code/Math block style */
    .formula-block {
      background: rgba(0,0,0,0.3); padding: 20px; border-left: 3px solid #42caff;
      font-family: 'Courier New', monospace; color: #aebbc9; margin: 25px 0;
      overflow-x: auto; white-space: pre-wrap; font-size: 0.95em;
    }

    /* Table Styles */
    .wp-table {
      width: 100%; border-collapse: collapse; margin: 30px 0;
      background: rgba(255,255,255,0.02); border-radius: 6px; overflow: hidden;
    }
    .wp-table th {
      text-align: left; padding: 15px 20px; background: rgba(66, 202, 255, 0.1);
      color: #42caff; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.9em;
    }
    .wp-table td {
      padding: 15px 20px; border-bottom: 1px solid rgba(255,255,255,0.03);
      color: #cbd5df; font-size: 0.9em;
    }
    .wp-table tr:last-child td { border-bottom: none; }

    /* --- CHART CONTAINERS --- */
    .chart-wrapper {
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 8px;
      padding: 20px;
      margin: 30px 0;
    }
    .chart-wrapper canvas {
      max-height: 400px;
      width: 100%;
    }
    .chart-caption {
      text-align: center; font-size: 0.85em; color: #7a8590; margin-top: 15px;
    }

    @media (max-width: 900px) {
      .container { grid-template-columns: 1fr; }
      aside { display: none; } 
      header { padding: 0 20px; }
      nav { display: none; }
    }
  </style>
</head>

<body>

  <header>
    <a href="index.html" class="logo">Miyagi X Pulse</a>
    <nav>
      <a href="index.html">Home</a>
      <a href="tokenomics.html">Tokenomics</a>
      <a href="#" style="color:#42caff;">Whitepaper</a>
      <a href="#" class="nav-cta">Buy MIX</a>
    </nav>
  </header>

  <div class="container">
    
    <aside>
      <h4>Contents</h4>
      <a href="#section-1" class="toc-link">1. Executive Summary</a>
      <a href="#section-2" class="toc-link">2. System Overview</a>
      <a href="#section-3" class="toc-link">3. Hybrid Pulse Architecture</a>
      <a href="#section-4" class="toc-link">4. Consensus Mechanism</a>
      <a href="#section-5" class="toc-link">5. Security Model</a>
      <a href="#section-6" class="toc-link">6. Tokenomics (Model)</a>
      <a href="#section-7" class="toc-link">7. Economic Incentives</a>
      <a href="#section-8" class="toc-link">8. Governance</a>
      <a href="#section-9" class="toc-link">9. Scaling Strategy</a>
      <a href="#section-10" class="toc-link">10. Allocation Details</a>
      <a href="#section-11" class="toc-link">11. Security Analysis</a>
      <a href="#section-12" class="toc-link">12. Self-Recovery</a>
      <a href="#section-13" class="toc-link">13. Operational Cost</a>
      <a href="#section-14" class="toc-link">14. API & Dev Appendix</a>
      <a href="#section-15" class="toc-link">15. Launch Plan</a>
      <a href="#section-16" class="toc-link">16. Appendices</a>
    </aside>

    <main>
      <h1>Miyagi X Pulse (MXP)</h1>
      <span class="version">Technical Whitepaper v1.0 — Full Institutional Release</span>

      <section id="section-1">
        <h2>Section 1 — Executive Summary</h2>
        <p>Miyagi X Pulse (MXP) is a hybrid distributed ledger system designed to support high-scale mobile participation through an energy-efficient consensus model known as <strong>Proof of Pulse and Participation (PoPP)</strong>.</p>
        <p>MXP enables millions of smartphones to act as lightweight nodes contributing secure activity proofs (“pulses”) at fixed intervals, aggregated into regional Micro-Blocks and finalized into global Pulse Blocks anchored to a major Layer-1 blockchain.</p>
        <p>The result is a decentralized economic engine built on verifiable mobile participation, hybrid cryptographic anchoring, multi-layer validation, and a governance structure optimized for long-term evolution.</p>
      </section>

      <section id="section-2">
        <h2>Section 2 — System Overview</h2>
        <h3>2.1 Network Layers</h3>
        <p>MXP is structured into three functional layers:</p>
        <ul>
          <li><strong>Pulse Layer (Mobile Layer):</strong> Smartphones send periodic pulses.</li>
          <li><strong>Consensus Layer:</strong> Hierarchical proof network. Leaders aggregate ~1,000 pulses; Cluster Nodes build Micro-Blocks; Core Nodes finalize global Pulse Blocks.</li>
          <li><strong>Anchoring Layer:</strong> The finalized Pulse Block root hash is committed to a major Layer-1 blockchain at fixed intervals (every 12 epochs).</li>
        </ul>

        <h3>2.2 Data Structures</h3>
        <p>Core data structures include:</p>
        <ul>
          <li><strong>Pulse (P):</strong> Timestamped device attestation.</li>
          <li><strong>Micro-Block (MB):</strong> Merkle tree of regional pulses.</li>
          <li><strong>Pulse Block (PB):</strong> Global consolidated structure.</li>
        </ul>
      </section>

      <section id="section-3">
        <h2>Section 3 — Hybrid Pulse Architecture</h2>
        <h3>3.1 Pulse Generation</h3>
        <p>Every Linked Node (LN) generates a pulse defined as:</p>
        <div class="formula-block">P = { uid, epoch_id, timestamp, device_hash, region_id, metadata, signature }</div>
        <p>Signature computation:</p>
        <div class="formula-block">sig = Sign(private_key, H(uid ∥ epoch_id ∥ timestamp ∥ device_hash))</div>
        
        <h3>3.5 Checkpoint Commitment</h3>
        <div class="formula-block">Compute global_root = MerkleRoot(PulseBlock)
Compute ledger_root = MerkleRoot(reward_ledger)
Sign combined_hash using CORE quorum
Submit CP to the anchoring L1 chain</div>
      </section>

      <section id="section-4">
        <h2>Section 4 — Consensus Mechanism</h2>
        <h3>4.1 Overview</h3>
        <p>Miyagi X Pulse introduces <strong>Proof of Pulse & Participation (PoPP)</strong>, a lightweight consensus mechanism optimized for mobile-first decentralized networks.</p>
        
        <h3>4.2 Pulse Epoch Structure</h3>
        <p>Time is divided into 6-hour Pulse Epochs (PE). Active MPNs generate a pulse:</p>
        <div class="formula-block">$$ P_i = H(UID_i \parallel T_e \parallel S_i) $$</div>
        <p>Cluster Validators aggregate pulses using a Merkle accumulator:</p>
        <div class="formula-block">$$ M_e = MerkleRoot(P_1, P_2, ..., P_n) $$</div>
      </section>

      <section id="section-5">
        <h2>Section 5 — Security Model</h2>
        <h3>5.2 Sybil Resistance</h3>
        <p>The Sybil inflation cost is modeled by:</p>
        <div class="formula-block">$$ C_{sybil}(n) = n \cdot C_{device} + \lambda \cdot P_{flagging} $$</div>
        
        <h3>5.4 Checkpoint Security</h3>
        <p>Adversaries must break both the PoPP layer and the L1 chain finality.</p>
        <div class="formula-block">$$ P_{false} = P_{cv\_collusion} \times P_{L1\_reorg} \approx 0 $$</div>
      </section>

      <section id="section-6">
        <h2>Section 6 — Tokenomics (Economic Model)</h2>
        <h3>6.1 Token Overview</h3>
        <ul>
          <li><strong>Symbol:</strong> MXP</li>
          <li><strong>Total Supply:</strong> 1,000,000,000 MXP (Fixed Cap)</li>
        </ul>

        <h3>6.2 Distribution Breakdown</h3>
        <p>The total supply is strictly fixed. The chart below illustrates the allocation, emphasizing our commitment to community mining (45%).</p>
        
        <div class="chart-wrapper">
          <canvas id="distributionChart"></canvas>
          <div class="chart-caption">Figure 6.1: MXP Token Allocation Strategy</div>
        </div>

        <h3>6.5 Reward Emission Formula</h3>
        <p>Mining rewards follow a diminishing-return model (similar to Halving):</p>
        <div class="formula-block">$$ R_t = R_0 \times e^{-kt} $$</div>
        <p>Where \(k = 0.18\) is the annual decay factor.</p>
      </section>

      <section id="section-7">
        <h2>Section 7 — Economic Incentives</h2>
        <h3>7.1 Mobile Node Incentives</h3>
        <p>Mobile nodes receive rewards based on pulse participation:</p>
        <div class="formula-block">$$ R_{i,e} = \frac{R_{epoch}}{N_{active}} \times W_i $$</div>
        
        <h3>7.2 Validator Incentives</h3>
        <p>Validators stake MXP and receive:</p>
        <div class="formula-block">$$ ROI = \frac{R_{cv} \cdot P_{MXP} - C_{oper}}{C_{oper}} $$</div>
      </section>

      <section id="section-8">
        <h2>Section 8 — Governance Framework</h2>
        <p>MXP adopts a hybrid governance model combining on-chain voting and off-chain DAO oversight.</p>
        <ul>
            <li><strong>Checkpoint Override:</strong> 5-of-7 CORE nodes can pause rewards if fraud is detected.</li>
            <li><strong>Slashing:</strong> Malicious validators lose staked MXP.</li>
        </ul>
      </section>

      <section id="section-9">
        <h2>Section 9 — Scaling Strategy</h2>
        <h3>9.1 Hierarchical Aggregation</h3>
        <p>MXP scales to 1 billion nodes using a tiered structure:</p>
        <div class="formula-block">$$ N_{max} = N_{CORE} \cdot 1000_{CL} \cdot 1000_{LD} = 1 \text{ Billion Nodes} $$</div>
      </section>

      <section id="section-10">
        <h2>Section 10 — Allocation Details</h2>
        <h3>10.3 Vesting Schedule</h3>
        <p>Team tokens have a 12-month cliff and vest linearly over 48 months.</p>
        <div class="formula-block">$$ R_{monthly} = \frac{150,000,000}{36} \approx 4,166,667 \text{ MXP/month} $$</div>
      </section>

      <section id="section-11">
        <h2>Section 11 — Security Analysis</h2>
        <h3>11.2 Attack Probability</h3>
        <div class="formula-block">$$ P_{false\_checkpoint} = P_{collusion} \times P_{L1\_reorg} \approx 0 $$</div>
        <h3>11.3 Slashing Formula</h3>
        <div class="formula-block">$$ S_{penalty} = s_{stake} \times f_{misbehavior} $$</div>
      </section>

      <section id="section-12">
        <h2>Section 12 — Self-Recovery</h2>
        <h3>12.1 Offline Node Recovery</h3>
        <p>If LNs are offline ≤ 3h: cached pulses accepted via Merkle proof replay.</p>
        <h3>12.2 Spike Detection</h3>
        <div class="formula-block">$$ \Delta_{activity} = |N_{active} - N_{expected}| $$</div>
        <p>If deviation > θ, quorum threshold raised by +20%.</p>
      </section>

      <section id="section-13">
        <h2>Section 13 — Operational Cost Model</h2>
        
        <h3>13.1 Node Costs</h3>
        <table class="wp-table">
            <thead>
                <tr>
                    <th>Node Type</th>
                    <th>Specs</th>
                    <th>Monthly Cost (USD)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Linked Node (LN)</td>
                    <td>Mobile</td>
                    <td>0.50</td>
                </tr>
                <tr>
                    <td>Cluster Node (CL)</td>
                    <td>2 cores, 256MB</td>
                    <td>500.00</td>
                </tr>
                <tr>
                    <td>Core Node (CORE)</td>
                    <td>8 cores, 2GB</td>
                    <td>1,500+</td>
                </tr>
            </tbody>
        </table>

        <h3>13.3 Five-Year Reward Projection</h3>
        <p>To ensure long-term value, rewards decrease annually. The chart below projects the emission schedule for the first 5 years.</p>
        
        <div class="chart-wrapper">
          <canvas id="emissionChart"></canvas>
          <div class="chart-caption">Figure 13.1: 5-Year Supply Emission Curve</div>
        </div>
      </section>

      <section id="section-14">
        <h2>Section 14 — API & Developer Appendix</h2>
        <h3>14.1 Core API Endpoints</h3>
        <div class="formula-block">POST /register       - Register a new mobile node
POST /pulse          - Submit pulse data
GET  /balance        - Fetch node MXP balance</div>
      </section>

      <section id="section-15">
        <h2>Section 15 — Launch Plan</h2>
        <table class="wp-table">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Duration</th>
                    <th>Milestone</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>MVP</td>
                    <td>3 months</td>
                    <td>Backend + minimal Android app</td>
                </tr>
                <tr>
                    <td>Testnet</td>
                    <td>6 months</td>
                    <td>1k users, PoPP validation</td>
                </tr>
                <tr>
                    <td>Mainnet</td>
                    <td>12–18 months</td>
                    <td>CORE genesis, L1 anchoring</td>
                </tr>
                <tr>
                    <td>Ecosystem</td>
                    <td>2–5 years</td>
                    <td>1B mobile nodes, DePIN integration</td>
                </tr>
            </tbody>
        </table>
      </section>

      <section id="section-16">
        <h2>Section 16 — Appendices</h2>
        <h3>16.1 Sample Size Calculation</h3>
        <p>Example: \(f=0.1, \alpha=0.999 \Rightarrow m \approx 66\)</p>
        <div class="formula-block">$$ m \geq \frac{\ln(1-\alpha)}{\ln(1-f)} $$</div>
      </section>

    </main>
  </div>

  <footer>
    © 2025 Miyagi X Pulse — Quantum Blockchain Network
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      
      // 1. Sidebar Highlight Logic
      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('.toc-link');

      window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          if (scrollY >= (sectionTop - 150)) {
            current = section.getAttribute('id');
          }
        });
        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href').includes(current)) {
            link.classList.add('active');
          }
        });
      });

      // 2. Chart: Token Distribution (Doughnut)
      const ctxDist = document.getElementById('distributionChart').getContext('2d');
      new Chart(ctxDist, {
        type: 'doughnut',
        data: {
          labels: ['Community Mining (45%)', 'Ecosystem (20%)', 'Team (15%)', 'Marketing (10%)', 'Liquidity (10%)'],
          datasets: [{
            data: [45, 20, 15, 10, 10],
            backgroundColor: [
              'rgba(66, 202, 255, 0.9)', 
              'rgba(255, 255, 255, 0.2)',
              'rgba(100, 100, 100, 0.5)',
              'rgba(66, 202, 255, 0.3)',
              'rgba(255, 255, 255, 0.1)'
            ],
            borderColor: '#000', borderWidth: 2
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          plugins: { legend: { position: 'right', labels: { color: '#b8c2cc' } } }
        }
      });

      // 3. Chart: Emission Curve (Line)
      const ctxEmis = document.getElementById('emissionChart').getContext('2d');
      new Chart(ctxEmis, {
        type: 'line',
        data: {
          labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
          datasets: [{
            label: 'Annual Rewards (MXP)',
            data: [90000000, 73800000, 60492000, 49603440, 40674820],
            borderColor: '#42caff',
            backgroundColor: 'rgba(66, 202, 255, 0.15)',
            fill: true, tension: 0.4, borderWidth: 3
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: {
            y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#7a8590' } },
            x: { grid: { display: false }, ticks: { color: '#7a8590' } }
          },
          plugins: { legend: { labels: { color: '#b8c2cc' } } }
        }
      });

    });
  </script>

</body>
</html>
